<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROARS Banking System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Add these in your <head> section -->
<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-analytics.js";
  import { getFirestore, doc, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

  // Your Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyDXze9xzKYGaz49akop-YLk5vTV4Y_LHzc",
    authDomain: "bank-80870.firebaseapp.com",
    projectId: "bank-80870",
    storageBucket: "bank-80870.firebasestorage.app",
    messagingSenderId: "393728504294",
    appId: "1:393728504294:web:b07ea0654a737fbe21a627",
    measurementId: "G-M6KXRM282Y"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const db = getFirestore(app);

  // Make Firebase available globally
  window.firebaseApp = app;
  window.firebaseDb = db;
  window.firebaseDoc = doc;
  window.firebaseGetDoc = getDoc;
  window.firebaseSetDoc = setDoc;
</script>
    
    
    <style>
        :root {
            --primary-blue: #003366;
            --secondary-blue: #00509E;
            --accent-gold: #FFD700;
            --elite-purple: #8A2BE2;
            --premier-red: #DC143C;
            --light-gold: #FFF8DC;
            --success-green: #28a745;
            --warning-yellow: #ffc107;
            --danger-red: #dc3545;
            --info-orange: #fd7e14;
            --light-gray: #f8f9fa;
            --dark-gray: #343a40;
            --white: #ffffff;
            --elite-gradient: linear-gradient(135deg, #8A2BE2 0%, #4B0082 100%);
            --premier-gradient: linear-gradient(135deg, #DC143C 0%, #8B0000 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f0f5ff;
            color: var(--primary-blue);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header & Navigation */
        header {
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--secondary-blue) 100%);
            color: var(--white);
            padding: 15px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.8rem;
            font-weight: 700;
        }

        .logo i {
            color: var(--accent-gold);
        }

        .logo .currency-symbol {
            font-family: 'Times New Roman', serif;
            font-size: 2rem;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 25px;
        }

        nav a {
            color: var(--white);
            text-decoration: none;
            font-weight: 500;
            padding: 8px 15px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }

        nav a:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .auth-buttons {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background-color: var(--accent-gold);
            color: var(--primary-blue);
        }

        .btn-primary:hover {
            background-color: #e6c200;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background-color: transparent;
            color: var(--white);
            border: 2px solid var(--accent-gold);
        }

        .btn-secondary:hover {
            background-color: rgba(255, 215, 0, 0.1);
        }

        .btn-success {
            background-color: var(--success-green);
            color: white;
        }

        .btn-danger {
            background-color: var(--danger-red);
            color: white;
        }

        .btn-warning {
            background-color: var(--warning-yellow);
            color: var(--dark-gray);
        }

        .btn-info {
            background-color: var(--info-orange);
            color: white;
        }

        .btn-elite {
            background: var(--elite-gradient);
            color: white;
        }

        .btn-premier {
            background: var(--premier-gradient);
            color: white;
        }

        /* Hero Section */
        .hero {
            padding: 80px 0;
            text-align: center;
            background: linear-gradient(rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.8)), 
                        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,100 Z" fill="%23003066" opacity="0.05"/></svg>');
            background-size: cover;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            color: var(--primary-blue);
        }

        .hero p {
            font-size: 1.3rem;
            max-width: 800px;
            margin: 0 auto 30px;
            color: var(--secondary-blue);
        }

        .exchange-rate-banner {
            background: linear-gradient(135deg, var(--accent-gold) 0%, #ffed4e 100%);
            color: var(--primary-blue);
            padding: 15px;
            border-radius: 10px;
            margin: 30px auto;
            max-width: 500px;
            font-weight: 600;
            font-size: 1.1rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .hero-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        /* Elite Tier Badge */
        .elite-tier-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: var(--elite-gradient);
            color: white;
            border-radius: 25px;
            font-weight: 600;
            margin: 20px 0;
            box-shadow: 0 4px 12px rgba(138, 43, 226, 0.3);
        }

        .premier-tier-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: var(--premier-gradient);
            color: white;
            border-radius: 25px;
            font-weight: 600;
            margin: 20px 0;
            box-shadow: 0 4px 12px rgba(220, 20, 60, 0.3);
        }

        /* Services Section */
        .services {
            padding: 60px 0;
            background-color: var(--white);
        }

        .section-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 50px;
            color: var(--primary-blue);
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .service-card {
            background-color: var(--light-gray);
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
            overflow: hidden;
        }

        .service-card.elite {
            border: 3px solid var(--elite-purple);
            background: linear-gradient(135deg, #f9f4ff 0%, #f0e6ff 100%);
        }

        .service-card.premier {
            border: 3px solid var(--premier-red);
            background: linear-gradient(135deg, #fff0f3 0%, #ffe6ea 100%);
        }

        .service-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }

        .service-card i {
            font-size: 2.5rem;
            margin-bottom: 20px;
        }

        .service-card.elite i {
            color: var(--elite-purple);
        }

        .service-card.premier i {
            color: var(--premier-red);
        }

        .service-card.standard i {
            color: var(--accent-gold);
        }

        .service-card h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--primary-blue);
        }

        .benefits-list {
            list-style: none;
            margin-top: 15px;
        }

        .benefits-list li {
            padding: 5px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .benefits-list li i {
            font-size: 1rem;
            color: var(--success-green);
        }

        /* Login Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: var(--white);
            border-radius: 10px;
            padding: 40px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dark-gray);
        }

        .modal-title {
            font-size: 2rem;
            margin-bottom: 25px;
            color: var(--primary-blue);
            text-align: center;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--secondary-blue);
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: var(--accent-gold);
            box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.2);
        }

        /* Dashboard */
        .dashboard {
            display: none;
            min-height: 100vh;
        }

        .dashboard-header {
            background-color: var(--primary-blue);
            color: var(--white);
            padding: 20px 0;
        }

        .dashboard-header .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            background-color: var(--accent-gold);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: var(--primary-blue);
        }

        .account-status {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .status-active {
            background-color: var(--success-green);
        }

        .status-pending {
            background-color: var(--warning-yellow);
            color: var(--dark-gray);
        }

        .status-frozen {
            background-color: var(--danger-red);
        }

        .dashboard-content {
            padding: 40px 0;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .card {
            background-color: var(--white);
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .card-title {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: var(--primary-blue);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .balance {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-blue);
            margin: 20px 0;
        }

        .balance-currency {
            font-family: 'Times New Roman', serif;
        }

        .lifetime-spending {
            background-color: var(--light-gray);
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .quick-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }

        .quick-action-btn {
            flex: 1;
            min-width: 120px;
            text-align: center;
            padding: 15px;
            background-color: var(--light-gray);
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .quick-action-btn:hover {
            background-color: #e9ecef;
        }

        .quick-action-btn i {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        /* Credit Cards */
        .credit-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }

        .credit-card {
            border-radius: 15px;
            padding: 25px;
            color: var(--white);
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .credit-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            z-index: 1;
        }

        .credit-card.platinum {
            background: linear-gradient(135deg, #E5E4E2 0%, #C0C0C0 100%);
            color: var(--primary-blue);
        }

        .credit-card.gold {
            background: linear-gradient(135deg, #FFD700 0%, #DAA520 100%);
        }

        .credit-card.standard {
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--secondary-blue) 100%);
        }

        .credit-card.elite {
            background: var(--elite-gradient);
        }

        .credit-card.premier {
            background: var(--premier-gradient);
        }

        .card-chip {
            width: 50px;
            height: 40px;
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            margin-bottom: 20px;
            position: relative;
            z-index: 2;
        }

        .card-number {
            font-size: 1.3rem;
            letter-spacing: 2px;
            margin: 15px 0;
            position: relative;
            z-index: 2;
        }

        .card-details {
            display: flex;
            justify-content: space-between;
            position: relative;
            z-index: 2;
        }

        .card-status {
            position: absolute;
            top: 15px;
            right: 15px;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            z-index: 2;
        }

        .status-pending {
            background-color: var(--warning-yellow);
            color: var(--dark-gray);
        }

        .status-active {
            background-color: var(--success-green);
        }

        .status-suspended {
            background-color: var(--danger-red);
        }

        .status-limited {
            background-color: var(--info-orange);
        }

        /* Loan Application */
        .loan-form textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            resize: vertical;
            min-height: 120px;
        }

        /* Transaction History */
        .transactions {
            margin-top: 20px;
        }

        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #eee;
        }

        .transaction-item:last-child {
            border-bottom: none;
        }

        .transaction-type {
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .transaction-credit {
            background-color: rgba(40, 167, 69, 0.1);
            color: var(--success-green);
        }

        .transaction-debit {
            background-color: rgba(220, 53, 69, 0.1);
            color: var(--danger-red);
        }

        /* Admin Dashboard */
        .admin-dashboard {
            display: none;
        }

        .admin-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
        }

        .admin-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .admin-table th, .admin-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .admin-table th {
            background-color: var(--primary-blue);
            color: var(--white);
        }

        .admin-table tr:hover {
            background-color: rgba(0, 0, 0, 0.02);
        }

        /* Elite Invitation */
        .elite-invitation {
            background: linear-gradient(135deg, #f9f4ff 0%, #e6d6ff 100%);
            border: 3px solid var(--elite-purple);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .elite-invitation::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--elite-gradient);
        }

        .invitation-title {
            color: var(--elite-purple);
            font-size: 2rem;
            margin-bottom: 20px;
        }

        /* Footer */
        footer {
            background-color: var(--primary-blue);
            color: var(--white);
            padding: 40px 0;
            text-align: center;
        }

        .footer-logo {
            font-size: 2rem;
            margin-bottom: 20px;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 30px;
            margin: 30px 0;
        }

        .footer-links a {
            color: var(--accent-gold);
            text-decoration: none;
        }

        .copyright {
            margin-top: 30px;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .header-content {
                flex-direction: column;
                gap: 20px;
            }
            
            nav ul {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .dashboard-header .container {
                flex-direction: column;
                gap: 20px;
            }
            
            .admin-controls {
                flex-direction: column;
            }
        }

        /* Alert Messages */
        .alert {
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .alert-success {
            background-color: rgba(40, 167, 69, 0.1);
            color: var(--success-green);
            border-left: 4px solid var(--success-green);
        }

        .alert-error {
            background-color: rgba(220, 53, 69, 0.1);
            color: var(--danger-red);
            border-left: 4px solid var(--danger-red);
        }

        .alert-info {
            background-color: rgba(0, 123, 255, 0.1);
            color: var(--secondary-blue);
            border-left: 4px solid var(--secondary-blue);
        }

        .alert-warning {
            background-color: rgba(255, 193, 7, 0.1);
            color: var(--dark-gray);
            border-left: 4px solid var(--warning-yellow);
        }

        .alert-elite {
            background-color: rgba(138, 43, 226, 0.1);
            color: var(--elite-purple);
            border-left: 4px solid var(--elite-purple);
        }
    
    /* Charges display */
.charge-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px;
    border-bottom: 1px solid #eee;
    background-color: var(--light-gray);
    margin-bottom: 10px;
    border-radius: 6px;
}

.charge-item:last-child {
    border-bottom: none;
}

.pending-charges-alert {
    background: linear-gradient(135deg, var(--warning-yellow) 0%, #ffd666 100%);
    color: var(--dark-gray);
    padding: 15px;
    border-radius: 8px;
    margin: 20px 0;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.pending-charges-alert a {
    color: var(--primary-blue);
    font-weight: bold;
    text-decoration: none;
}

.pending-charges-alert a:hover {
    text-decoration: underline;
}
    
    
    
    
    </style>
</head>
<body>
    <!-- Landing Page -->
    <div id="landingPage">
        <header>
            <div class="container header-content">
                <div class="logo">
                    <i class="fas fa-university"></i>
                    <span>ROARS <span class="currency-symbol">Ꝟ</span> BANK</span>
                </div>
                <nav>
                    <ul>
                        <li><a href="#services">Services</a></li>
                        <li><a href="#elite">Elite Banking</a></li>
                        <li><a href="#about">About</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                </nav>
                <div class="auth-buttons">
                    <button class="btn btn-secondary" id="adminLoginBtn">
                        <i class="fas fa-user-shield"></i> Admin Login
                    </button>
                    <button class="btn btn-primary" id="customerLoginBtn">
                        <i class="fas fa-user"></i> Customer Login
                    </button>
                </div>
            </div>
        </header>

        <section class="hero">
            <div class="container">
                <h1>Welcome to ROARS Bank</h1>
                <p>Experience premium banking with ROARS currency (ꝞROARS). Secure, innovative, and designed for your financial success. Join thousands of satisfied customers who trust us with their financial future.</p>
                
                <div class="exchange-rate-banner">
                    <i class="fas fa-exchange-alt"></i>
                    <span>Exchange Rate: 1 ꝞROARS = $0.15 USD</span>
                    <span style="font-size: 0.9rem; margin-left: 10px; opacity: 0.8;">(ROARS are rare and hard to earn)</span>
                </div>

                <div class="hero-buttons">
                    <button class="btn btn-primary" id="learnMoreBtn">
                        <i class="fas fa-info-circle"></i> Learn More
                    </button>
                    <button class="btn btn-secondary" id="openAccountBtn">
                        <i class="fas fa-plus-circle"></i> Open an Account
                    </button>
                </div>
            </div>
        </section>

        <section class="services" id="services">
            <div class="container">
                <h2 class="section-title">Our Banking Services</h2>
                <div class="services-grid">
                    <div class="service-card standard">
                        <i class="fas fa-credit-card"></i>
                        <h3>Standard Cards</h3>
                        <p>Basic ROARS banking cards for everyday use with standard benefits.</p>
                        <ul class="benefits-list">
                            <li><i class="fas fa-check"></i> Standard spending limits</li>
                            <li><i class="fas fa-check"></i> Basic fraud protection</li>
                            <li><i class="fas fa-check"></i> Online banking access</li>
                        </ul>
                    </div>
                    <div class="service-card premier">
                        <i class="fas fa-crown"></i>
                        <h3>Premier Tier</h3>
                        <p>Unlock special benefits after spending 500+ ꝞROARS.</p>
                        <ul class="benefits-list">
                            <li><i class="fas fa-check"></i> Higher spending limits</li>
                            <li><i class="fas fa-check"></i> Priority customer service</li>
                            <li><i class="fas fa-check"></i> Exclusive event invites</li>
                            <li><i class="fas fa-check"></i> Premium card design</li>
                        </ul>
                    </div>
                    <div class="service-card elite">
                        <i class="fas fa-gem"></i>
                        <h3>Lionheart Elite</h3>
                        <p>Exclusive invitation-only tier for spending 1000+ ꝞROARS.</p>
                        <ul class="benefits-list">
                            <li><i class="fas fa-check"></i> Cut the line at school events</li>
                            <li><i class="fas fa-check"></i> Sit with popular kids at lunch</li>
                            <li><i class="fas fa-check"></i> Exclusive school lounge access</li>
                            <li><i class="fas fa-check"></i> Personal financial advisor</li>
                            <li><i class="fas fa-check"></i> VIP event invitations</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <section id="elite" style="background-color: var(--light-gray); padding: 60px 0;">
            <div class="container">
                <h2 class="section-title">Elite Banking Tiers</h2>
                <div style="max-width: 800px; margin: 0 auto;">
                    <div class="card">
                        <h3 style="color: var(--elite-purple); margin-bottom: 20px;">
                            <i class="fas fa-gem"></i> Lionheart Elite Program
                        </h3>
                        <p>The Lionheart Elite program is our most exclusive banking tier, available only by invitation to customers who have demonstrated exceptional financial activity.</p>
                        
                        <div style="margin: 30px 0;">
                            <h4>How to Qualify:</h4>
                            <div class="lifetime-spending">
                                <p><strong>Spend 1000+ ꝞROARS</strong> in your account lifetime to receive an invitation.</p>
                                <p style="font-size: 0.9rem; color: #666; margin-top: 10px;">
                                    <i class="fas fa-info-circle"></i> Note: ROARS are rare and hard to earn. This achievement demonstrates significant financial activity.
                                </p>
                            </div>
                        </div>

                        <h4>Exclusive School Benefits:</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 20px 0;">
                            <div style="background: white; padding: 20px; border-radius: 8px;">
                                <i class="fas fa-utensils" style="color: var(--elite-purple); font-size: 1.5rem; margin-bottom: 10px;"></i>
                                <h5>Popular Lunch Table</h5>
                                <p>Reserved seating with the most popular students during lunch</p>
                            </div>
                            <div style="background: white; padding: 20px; border-radius: 8px;">
                                <i class="fas fa-running" style="color: var(--elite-purple); font-size: 1.5rem; margin-bottom: 10px;"></i>
                                <h5>Event Line Priority</h5>
                                <p>Skip lines at school events, games, and assemblies</p>
                            </div>
                            <div style="background: white; padding: 20px; border-radius: 8px;">
                                <i class="fas fa-user-friends" style="color: var(--elite-purple); font-size: 1.5rem; margin-bottom: 10px;"></i>
                                <h5>Social Recognition</h5>
                                <p>Featured in school announcements and social media</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <footer id="contact">
            <div class="container">
                <div class="footer-logo">
                    <i class="fas fa-university"></i> ROARS <span class="currency-symbol">Ꝟ</span> BANK
                </div>
                <p>Banking with excellence and security since 2025</p>
                <div class="footer-links">
                    <a href="#privacy">Privacy Policy</a>
                    <a href="#terms">Terms of Service</a>
                    <a href="#support">Customer Support</a>
                    <a href="#careers">Careers</a>
                </div>
                <div class="copyright">
                    &copy; 2026 ROARS Banking System. All rights reserved.
                </div>
            </div>
        </footer>
    </div>
    
    
    <!-- View Charges Modal -->
<div id="viewChargesModal" class="modal">
    <div class="modal-content">
        <span class="close-modal" id="closeChargesModal">&times;</span>
        <h3 class="modal-title">Pending Charges</h3>
        <div id="chargesList" style="margin: 20px 0;">
            <!-- Charges will be loaded here -->
        </div>
        <div style="border-top: 2px solid var(--accent-gold); padding-top: 20px;">
            <h4>Total Due: <span id="totalCharges" style="color: var(--danger-red);">Ꝟ0.00</span></h4>
            <button class="btn btn-success" id="payChargesBtn" style="width: 100%; margin-top: 20px;">
                <i class="fas fa-credit-card"></i> Pay All Charges
            </button>
        </div>
    </div>
</div>

<!-- Add Charge Modal (Admin) -->
<div id="addChargeModal" class="modal">
    <div class="modal-content">
        <span class="close-modal" id="closeAddChargeModal">&times;</span>
        <h3 class="modal-title">Add Charge to Customer</h3>
        <p>Customer: <strong id="chargeCustomerName">Customer Name</strong></p>
        <p>Account: <strong id="chargeAccountNumber">XXXXXX</strong></p>
        <form id="addChargeForm">
            <div class="form-group">
                <label for="chargeDescription">Charge Description</label>
                <input type="text" id="chargeDescription" placeholder="e.g., Library Fine, Lunch Fee, etc." required>
            </div>
            <div class="form-group">
                <label for="chargeAmount">Amount (ꝞROARS)</label>
                <input type="number" id="chargeAmount" min="0.01" step="0.01" placeholder="Enter amount" required>
            </div>
            <div class="form-group">
                <label for="chargeDueDate">Due Date</label>
                <input type="date" id="chargeDueDate" required>
            </div>
            <button type="submit" class="btn btn-warning" style="width: 100%;">
                <i class="fas fa-plus-circle"></i> Add Charge
            </button>
        </form>
    </div>
</div>

<!-- Payment Modal -->
<div id="paymentModal" class="modal">
    <div class="modal-content">
        <span class="close-modal" id="closePaymentModal">&times;</span>
        <h3 class="modal-title">Make Payment</h3>
        <form id="paymentForm">
            <div class="form-group">
                <label for="paymentAmount">Payment Amount (ꝞROARS)</label>
                <input type="number" id="paymentAmount" min="0.01" step="0.01" required>
            </div>
            <div class="form-group">
                <label for="paymentMethod">Payment Method</label>
                <select id="paymentMethod" required>
                    <option value="bank_transfer">Bank Transfer</option>
                    <option value="credit_card">Credit Card</option>
                    <option value="cash">Cash</option>
                </select>
            </div>
            <div class="form-group">
                <label for="paymentReference">Payment Reference (Optional)</label>
                <input type="text" id="paymentReference" placeholder="e.g., Invoice #12345">
            </div>
            <button type="submit" class="btn btn-success" style="width: 100%;">
                <i class="fas fa-credit-card"></i> Submit Payment
            </button>
        </form>
    </div>
</div>

    <!-- Customer Dashboard -->
    <div id="customerDashboard" class="dashboard">
        <div class="dashboard-header">
            <div class="container">
                <div class="logo">
                    <i class="fas fa-university"></i>
                    <span>ROARS <span class="currency-symbol">Ꝟ</span> BANK</span>
                </div>
                <div class="user-info">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div>
                        <h3 id="customerName">Customer Name</h3>
                        <p>Account: <span id="displayAccountNumber">XXXXXX</span></p>
                    </div>
                    <div id="tierBadge"></div>
                    <div class="account-status status-active" id="accountStatusDisplay">Active</div>
                </div>
                <div>
                    <button class="btn btn-secondary" id="logoutBtn">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </div>
        </div>

        <div class="dashboard-content">
            <div class="container">
                <!-- Alerts will appear here -->
                <div id="alertContainer"></div>
                
                <!-- Elite Invitation (if eligible) -->
                <div id="eliteInvitationContainer"></div>
                
                <div class="dashboard-grid">
                    <!-- Account Summary -->
                    <div class="card">
                        <h3 class="card-title">Account Summary</h3>
                        <div class="balance">
                            <span class="balance-currency">Ꝟ</span>
                            <span id="currentBalance">0.00</span>
                            <span>ROARS</span>
                        </div>
                        <div class="lifetime-spending">
                            <p><strong>Lifetime Spending:</strong> <span id="lifetimeSpending">Ꝟ0.00</span></p>
                            <p><strong>Elite Status:</strong> <span id="eliteStatus">Not Eligible</span></p>
                            <progress id="eliteProgress" value="0" max="1000" style="width: 100%; margin-top: 10px;"></progress>
                            <p style="font-size: 0.9rem; margin-top: 5px;"><span id="spendingToGo">1000</span> ꝞROARS to go for Lionheart Elite invitation</p>
                        </div>
                        <p>Account Status: <span id="accountStatusText">Active</span></p>
                        <p>Account Number: <strong id="accountNumberDisplay">XXXXXX</strong></p>
                        <div class="quick-actions">
                            <div class="quick-action-btn" id="viewTransactionsBtn">
                                <i class="fas fa-history"></i>
                                <p>Transactions</p>
                            </div>
                            <div class="quick-action-btn" id="transferBtn">
                                <i class="fas fa-exchange-alt"></i>
                                <p>Transfer</p>
                            </div>
                            <div class="quick-action-btn" id="changePinBtn">
                                <i class="fas fa-key"></i>
                                <p>Change PIN</p>
                            </div>
                        </div>
                    </div>

                    <!-- Credit Cards -->
                    <div class="card">
                        <h3 class="card-title">
                            Credit Cards
                            <button class="btn btn-primary" id="applyCardBtn">
                                <i class="fas fa-plus"></i> Apply
                            </button>
                        </h3>
                        <div class="credit-cards" id="creditCardsContainer">
                            <!-- Cards will be dynamically inserted here -->
                        </div>
                    </div>
                </div>

                <!-- Transaction History -->
                <div class="card">
                    <h3 class="card-title">Recent Transactions</h3>
                    <div class="transactions" id="transactionHistory">
                        <!-- Transactions will be dynamically inserted here -->
                    </div>
                </div>

                <!-- Loan Application -->
                <div class="card">
                    <h3 class="card-title">Loan Application</h3>
                    <p>Need funds for a project, education, or personal use? Apply for a loan with competitive interest rates.</p>
                    <button class="btn btn-success" id="applyLoanBtn" style="margin-top: 20px;">
                        <i class="fas fa-file-invoice-dollar"></i> Apply for Loan
                    </button>
                </div>

                <!-- Currency Converter -->
                <div class="card">
                    <h3 class="card-title">ROARS Currency Converter</h3>
                    <div style="margin-bottom: 20px; padding: 15px; background-color: var(--light-gray); border-radius: 8px;">
                        <p><strong>Exchange Rate:</strong> 1 ꝞROARS = $0.15 USD</p>
                        <p style="font-size: 0.9rem; color: #666;">ROARS are rare and difficult to earn. Value reflects scarcity.</p>
                    </div>
                    <div class="form-group">
                        <label for="convertAmount">Amount in ROARS (Ꝟ)</label>
                        <input type="number" id="convertAmount" placeholder="Enter amount">
                    </div>
                    <div class="form-group">
                        <label for="convertCurrency">Convert to</label>
                        <select id="convertCurrency">
                            <option value="USD">US Dollar (USD)</option>
                            <option value="EUR">Euro (EUR)</option>
                            <option value="GBP">British Pound (GBP)</option>
                            <option value="JPY">Japanese Yen (JPY)</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" id="convertBtn">
                        <i class="fas fa-exchange-alt"></i> Convert
                    </button>
                    <div id="conversionResult" style="margin-top: 20px; font-size: 1.2rem;"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="adminDashboard" class="dashboard admin-dashboard">
        <div class="dashboard-header">
            <div class="container">
                <div class="logo">
                    <i class="fas fa-user-shield"></i>
                    <span>ROARS <span class="currency-symbol">Ꝟ</span> ADMIN</span>
                </div>
                <div>
                    <button class="btn btn-secondary" id="adminLogoutBtn">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </div>
        </div>

        <div class="dashboard-content">
            <div class="container">
                <div id="adminAlertContainer"></div>
                
                <h2 class="section-title">Admin Dashboard</h2>
                
                <div class="admin-controls">
                    <button class="btn btn-primary" id="createAccountBtn">
                        <i class="fas fa-user-plus"></i> Create New Account
                    </button>
                    <button class="btn btn-warning" id="manageCardsBtn">
                        <i class="fas fa-credit-card"></i> Manage Credit Cards
                    </button>
                    <button class="btn btn-info" id="viewLoansBtn">
                        <i class="fas fa-hand-holding-usd"></i> View Loan Applications
                    </button>
                    <button class="btn btn-elite" id="manageEliteBtn">
                        <i class="fas fa-gem"></i> Manage Elite Invitations
                    </button>
                </div>

                <!-- Create Account Form -->
                <div class="card" id="createAccountForm" style="display: none;">
                    <h3 class="card-title">Create New Customer Account</h3>
                    <form id="newAccountForm">
                        <div class="form-group">
                            <label for="newCustomerName">Customer Name</label>
                            <input type="text" id="newCustomerName" required>
                        </div>
                        <div class="form-group">
                            <label for="newCustomerEmail">Email Address</label>
                            <input type="email" id="newCustomerEmail" required>
                        </div>
                        <div class="form-group">
                            <label for="initialBalance">Initial Balance (ꝞROARS)</label>
                            <input type="number" id="initialBalance" min="0" value="100" required>
                            <small>ROARS are rare - initial balances are typically low (100-500 Ꝟ)</small>
                        </div>
                        <div class="form-group">
                            <label for="newCustomerPIN">Set 4-digit PIN</label>
                            <input type="password" id="newCustomerPIN" pattern="\d{4}" maxlength="4" required>
                        </div>
                        <button type="submit" class="btn btn-success">
                            <i class="fas fa-save"></i> Create Account
                        </button>
                    </form>
                </div>

                <!-- Credit Card Applications Table -->
                <div class="card" id="creditCardApplications" style="display: none;">
                    <h3 class="card-title">Credit Card Applications</h3>
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Account #</th>
                                <th>Name</th>
                                <th>Card Type</th>
                                <th>Income</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="cardApplicationsTable">
                            <!-- Card applications will be dynamically inserted here -->
                        </tbody>
                    </table>
                </div>

                <!-- Customer Accounts Table -->
                <div class="card">
                    <h3 class="card-title">Customer Accounts</h3>
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Account #</th>
                                <th>Name</th>
                                <th>Balance (Ꝟ)</th>
                                <th>Lifetime Spend</th>
                                <th>Tier</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="customersTable">
                            <!-- Customer data will be dynamically inserted here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modals -->
    <div id="adminLoginModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" id="closeAdminModal">&times;</span>
            <h3 class="modal-title">Admin Login</h3>
            <form id="adminLoginForm">
                <div class="form-group">
                    <label for="adminUsername">Username</label>
                    <input type="text" id="adminUsername" required>
                </div>
                <div class="form-group">
                    <label for="adminPassword">Password</label>
                    <input type="password" id="adminPassword" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    <i class="fas fa-sign-in-alt"></i> Login as Admin
                </button>
            </form>
            <p style="margin-top: 20px; text-align: center; font-size: 0.9rem;">
                
            </p>
        </div>
    </div>

    <div id="customerLoginModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" id="closeCustomerModal">&times;</span>
            <h3 class="modal-title">Customer Login</h3>
            <form id="customerLoginForm">
                <div class="form-group">
                    <label for="accountNumber">Account Number (6 digits)</label>
                    <input type="text" id="accountNumber" pattern="\d{6}" maxlength="6" required>
                </div>
                <div class="form-group">
                    <label for="pin">4-digit PIN</label>
                    <input type="password" id="pin" pattern="\d{4}" maxlength="4" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    <i class="fas fa-sign-in-alt"></i> Login to Account
                </button>
            </form>
            <p style="margin-top: 20px; text-align: center; font-size: 0.9rem;">
              
            </p>
        </div>
    </div>

    <!-- Change PIN Modal -->
    <div id="changePinModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" id="closePinModal">&times;</span>
            <h3 class="modal-title">Change PIN</h3>
            <form id="changePinForm">
                <div class="form-group">
                    <label for="currentPIN">Current PIN</label>
                    <input type="password" id="currentPIN" pattern="\d{4}" maxlength="4" required>
                </div>
                <div class="form-group">
                    <label for="newPIN">New PIN (4 digits)</label>
                    <input type="password" id="newPIN" pattern="\d{4}" maxlength="4" required>
                </div>
                <div class="form-group">
                    <label for="confirmPIN">Confirm New PIN</label>
                    <input type="password" id="confirmPIN" pattern="\d{4}" maxlength="4" required>
                </div>
                <button type="submit" class="btn btn-success" style="width: 100%;">
                    <i class="fas fa-key"></i> Update PIN
                </button>
            </form>
        </div>
    </div>

    <!-- Apply for Credit Card Modal -->
    <div id="applyCardModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" id="closeCardModal">&times;</span>
            <h3 class="modal-title">Apply for Credit Card</h3>
            <p style="margin-bottom: 20px; color: #666;">
                <i class="fas fa-info-circle"></i> Your application will be sent via email for admin approval. Admin will review and respond within 3-5 school days.
            </p>
            <form id="applyCardForm">
                <div class="form-group">
                    <label for="cardType">Card Type</label>
                    <select id="cardType" required>
                        <option value="standard">ROARS Standard</option>
                        <option value="gold">ROARS Gold</option>
                        <option value="platinum">ROARS Platinum</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="annualIncome">Annual Income (ꝞROARS)</label>
                    <input type="number" id="annualIncome" min="0" required>
                    <small>ROARS are rare - typical annual income is 200-500 Ꝟ</small>
                </div>
                <div class="form-group">
                    <label for="employmentStatus">Employment Status</label>
                    <select id="employmentStatus" required>
                        <option value="student">Student</option>
                        <option value="part-time">Part-time Job</option>
                        <option value="allowance">Allowance</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="cardReason">Why do you want this card?</label>
                    <textarea id="cardReason" placeholder="Please explain why you need this credit card..." rows="3" required></textarea>
                </div>
                <button type="submit" class="btn btn-success" style="width: 100%;">
                    <i class="fas fa-paper-plane"></i> Submit Application via Email
                </button>
            </form>
        </div>
    </div>

    <!-- Loan Application Modal -->
    <div id="loanModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" id="closeLoanModal">&times;</span>
            <h3 class="modal-title">Apply for Loan</h3>
            <p>This will open your email client with a pre-filled application. You can edit the email before sending.</p>
            <form id="loanForm">
                <div class="form-group">
                    <label for="loanAmount">Loan Amount (ꝞROARS)</label>
                    <input type="number" id="loanAmount" min="50" max="5000" required>
                    <small>Maximum loan amount is 5000 ꝞROARS due to currency rarity</small>
                </div>
                <div class="form-group">
                    <label for="loanPurpose">Purpose of Loan</label>
                    <select id="loanPurpose" required>
                        <option value="school">School Supplies/Books</option>
                        <option value="lunch">Lunch Money</option>
                        <option value="events">School Events/Trips</option>
                        <option value="projects">School Projects</option>
                        <option value="personal">Personal Expenses</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="repaymentPeriod">Repayment Period (Months)</label>
                    <select id="repaymentPeriod" required>
                        <option value="3">3 Months</option>
                        <option value="6">6 Months</option>
                        <option value="12">12 Months</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="loanComments">Additional Comments</label>
                    <textarea id="loanComments" placeholder="Any additional information about your loan request..."></textarea>
                </div>
                <button type="submit" class="btn btn-success" style="width: 100%;">
                    <i class="fas fa-envelope"></i> Open Email Application
                </button>
            </form>
        </div>
    </div>
<!-- Add Money Modal -->
<div id="addMoneyModal" class="modal">
    <div class="modal-content">
        <span class="close-modal" id="closeAddMoneyModal">&times;</span>
        <h3 class="modal-title">Add Money to Account</h3>
        <p>Customer: <strong id="addMoneyCustomerName">Customer Name</strong></p>
        <p>Account: <strong id="addMoneyAccountNumber">XXXXXX</strong></p>
        <p>Current Balance: <strong id="addMoneyCurrentBalance">Ꝟ0.00</strong></p>
        
        <form id="addMoneyForm">
            <div class="form-group">
                <label for="addMoneyAmount">Amount to Add (ꝞROARS)</label>
                <input type="number" id="addMoneyAmount" min="0.01" step="0.01" placeholder="Enter amount" required>
            </div>
            <div class="form-group">
                <label for="addMoneyReason">Reason for Adding Money</label>
                <input type="text" id="addMoneyReason" placeholder="e.g., Salary, Gift, Reward, etc." required>
            </div>
            <button type="submit" class="btn btn-success" style="width: 100%;">
                <i class="fas fa-money-bill-wave"></i> Add Money to Account
            </button>
        </form>
    </div>
</div>
<script>
// Demo data initialization with payment system
const initializeDemoData = async () => {
    try {
        // Check if data exists in Firebase
        const docRef = window.firebaseDoc(window.firebaseDb, 'bankData', 'mainData');
        const docSnap = await window.firebaseGetDoc(docRef);
        
        if (!docSnap.exists()) {
            const demoData = {
                customers: [
                    {
                        accountNumber: '123456',
                        name: 'John Smith',
                        email: 'john.smith@example.com',
                        pin: '1234',
                        balance: 1250.50,
                        lifetimeSpent: 850.75,
                        status: 'active',
                        tier: 'premier',
                        pendingCharges: [],
                        paidCharges: [],
                        transactions: [
                            { id: 1, date: '2023-10-15', description: 'Salary Deposit', amount: 500, type: 'credit' },
                            { id: 2, date: '2023-10-10', description: 'School Supplies', amount: -125.75, type: 'debit' },
                            { id: 3, date: '2023-10-05', description: 'Lunch Money', amount: -85.30, type: 'debit' },
                            { id: 4, date: '2023-09-28', description: 'Game Tickets', amount: -200, type: 'debit' },
                            { id: 5, date: '2023-09-20', description: 'Interest Earned', amount: 45.25, type: 'credit' }
                        ],
                        creditCards: [
                            {
                                id: 1,
                                type: 'platinum',
                                cardNumber: '**** 1234',
                                expiry: '12/26',
                                limit: 5000,
                                used: 2500,
                                status: 'active',
                                pendingPayments: 0
                            }
                        ],
                        cardApplications: []
                    },
                    {
                        accountNumber: '234567',
                        name: 'Jane Doe',
                        email: 'jane.doe@example.com',
                        pin: '2345',
                        balance: 850.25,
                        lifetimeSpent: 1200.50,
                        status: 'active',
                        tier: 'elite',
                        pendingCharges: [
                            {
                                id: 1,
                                date: '2023-10-20',
                                description: 'Library Fine',
                                amount: 25.00,
                                dueDate: '2023-11-20',
                                status: 'pending'
                            }
                        ],
                        paidCharges: [],
                        transactions: [
                            { id: 1, date: '2023-10-12', description: 'Freelance Payment', amount: 300, type: 'credit' },
                            { id: 2, date: '2023-10-08', description: 'School Trip', amount: -450, type: 'debit' },
                            { id: 3, date: '2023-10-01', description: 'Yearbook', amount: -85.60, type: 'debit' }
                        ],
                        creditCards: [
                            {
                                id: 1,
                                type: 'elite',
                                cardNumber: '**** 8888',
                                expiry: '12/27',
                                limit: 10000,
                                used: 3500,
                                status: 'active',
                                pendingPayments: 25.00
                            }
                        ],
                        cardApplications: []
                    }
                ],
                loanApplications: [],
                cardApplications: [],
                admin: {
                    username: 'admin',
                    password: 'admin123bankroar'
                },
                exchangeRate: 0.15,
                lastUpdated: new Date().toISOString()
            };
            
            await window.firebaseSetDoc(docRef, demoData);
            console.log("Demo data initialized in Firebase");
            return demoData;
        }
        return docSnap.data();
    } catch (error) {
        console.error("Error initializing demo data:", error);
        // Fallback to localStorage if Firebase fails
        if (!localStorage.getItem('roarsBankData')) {
            const demoData = {
                customers: [
                    {
                        accountNumber: '123456',
                        name: 'John Smith',
                        email: 'john.smith@example.com',
                        pin: '1234',
                        balance: 1250.50,
                        lifetimeSpent: 850.75,
                        status: 'active',
                        tier: 'premier',
                        pendingCharges: [],
                        paidCharges: [],
                        transactions: [
                            { id: 1, date: '2023-10-15', description: 'Salary Deposit', amount: 500, type: 'credit' },
                            { id: 2, date: '2023-10-10', description: 'School Supplies', amount: -125.75, type: 'debit' },
                            { id: 3, date: '2023-10-05', description: 'Lunch Money', amount: -85.30, type: 'debit' },
                            { id: 4, date: '2023-09-28', description: 'Game Tickets', amount: -200, type: 'debit' },
                            { id: 5, date: '2023-09-20', description: 'Interest Earned', amount: 45.25, type: 'credit' }
                        ],
                        creditCards: [
                            {
                                id: 1,
                                type: 'platinum',
                                cardNumber: '**** 1234',
                                expiry: '12/26',
                                limit: 5000,
                                used: 2500,
                                status: 'active',
                                pendingPayments: 0
                            }
                        ],
                        cardApplications: []
                    },
                    {
                        accountNumber: '234567',
                        name: 'Jane Doe',
                        email: 'jane.doe@example.com',
                        pin: '2345',
                        balance: 850.25,
                        lifetimeSpent: 1200.50,
                        status: 'active',
                        tier: 'elite',
                        pendingCharges: [
                            {
                                id: 1,
                                date: '2023-10-20',
                                description: 'Library Fine',
                                amount: 25.00,
                                dueDate: '2023-11-20',
                                status: 'pending'
                            }
                        ],
                        paidCharges: [],
                        transactions: [
                            { id: 1, date: '2023-10-12', description: 'Freelance Payment', amount: 300, type: 'credit' },
                            { id: 2, date: '2023-10-08', description: 'School Trip', amount: -450, type: 'debit' },
                            { id: 3, date: '2023-10-01', description: 'Yearbook', amount: -85.60, type: 'debit' }
                        ],
                        creditCards: [
                            {
                                id: 1,
                                type: 'elite',
                                cardNumber: '**** 8888',
                                expiry: '12/27',
                                limit: 10000,
                                used: 3500,
                                status: 'active',
                                pendingPayments: 25.00
                            }
                        ],
                        cardApplications: []
                    }
                ],
                loanApplications: [],
                cardApplications: [],
                admin: {
                    username: 'admin',
                    password: 'admin123bankroar'
                },
                exchangeRate: 0.15
            };
            
            localStorage.setItem('roarsBankData', JSON.stringify(demoData));
            return demoData;
        }
        return JSON.parse(localStorage.getItem('roarsBankData'));
    }
};

// Get bank data from Firebase (or localStorage fallback)
const getBankData = async () => {
    try {
        if (window.firebaseDb) {
            const docRef = window.firebaseDoc(window.firebaseDb, 'bankData', 'mainData');
            const docSnap = await window.firebaseGetDoc(docRef);
            if (docSnap.exists()) {
                return docSnap.data();
            }
        }
        // Fallback to localStorage if Firebase fails
        return JSON.parse(localStorage.getItem('roarsBankData'));
    } catch (error) {
        console.error("Error getting data:", error);
        // Fallback to localStorage
        const localData = localStorage.getItem('roarsBankData');
        if (localData) {
            return JSON.parse(localData);
        }
        return null;
    }
};

// Save bank data to Firebase (with localStorage backup)
const saveBankData = async (data) => {
    try {
        if (window.firebaseDb) {
            data.lastUpdated = new Date().toISOString();
            const docRef = window.firebaseDoc(window.firebaseDb, 'bankData', 'mainData');
            await window.firebaseSetDoc(docRef, data);
            console.log("Data saved to Firebase successfully");
            
            // Also save to localStorage as backup
            localStorage.setItem('roarsBankData', JSON.stringify(data));
            return true;
        } else {
            // Fallback to localStorage
            localStorage.setItem('roarsBankData', JSON.stringify(data));
            console.log("Data saved to localStorage (Firebase not available)");
            return true;
        }
    } catch (error) {
        console.error("Error saving data:", error);
        // Fallback to localStorage
        try {
            localStorage.setItem('roarsBankData', JSON.stringify(data));
            console.log("Data saved to localStorage as fallback");
            return true;
        } catch (localError) {
            console.error("Failed to save to localStorage:", localError);
            return false;
        }
    }
};

// Generate a random 6-digit account number
const generateAccountNumber = () => {
    return Math.floor(100000 + Math.random() * 900000).toString();
};

// Calculate lifetime spending from transactions
const calculateLifetimeSpent = (transactions) => {
    if (!transactions) return 0;
    return transactions
        .filter(t => t.type === 'debit')
        .reduce((sum, t) => sum + Math.abs(t.amount), 0);
};

// Calculate total pending charges
const calculatePendingCharges = (customer) => {
    if (!customer.pendingCharges) return 0;
    return customer.pendingCharges.reduce((sum, charge) => sum + charge.amount, 0);
};

// Determine tier based on lifetime spending
const determineTier = (lifetimeSpent) => {
    if (lifetimeSpent >= 1000) return 'elite';
    if (lifetimeSpent >= 500) return 'premier';
    return 'standard';
};

// Get tier display name and badge
const getTierInfo = (tier) => {
    switch(tier) {
        case 'elite':
            return {
                name: 'Lionheart Elite',
                badge: '<div class="elite-tier-badge"><i class="fas fa-gem"></i> Lionheart Elite</div>',
                color: 'var(--elite-purple)'
            };
        case 'premier':
            return {
                name: 'Premier',
                badge: '<div class="premier-tier-badge"><i class="fas fa-crown"></i> Premier</div>',
                color: 'var(--premier-red)'
            };
        default:
            return {
                name: 'Standard',
                badge: '',
                color: 'var(--primary-blue)'
            };
    }
};

// Show alert message
const showAlert = (message, type = 'info', containerId = 'alertContainer') => {
    const container = document.getElementById(containerId);
    const alert = document.createElement('div');
    alert.className = `alert alert-${type}`;
    
    let icon = 'info-circle';
    if (type === 'success') icon = 'check-circle';
    if (type === 'error') icon = 'exclamation-circle';
    if (type === 'warning') icon = 'exclamation-triangle';
    if (type === 'elite') icon = 'gem';
    
    alert.innerHTML = `
        <i class="fas fa-${icon}"></i>
        <span>${message}</span>
    `;
    
    container.appendChild(alert);
    
    // Remove alert after 5 seconds
    setTimeout(() => {
        alert.remove();
    }, 5000);
};

// Format currency
const formatCurrency = (amount) => {
    return parseFloat(amount).toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,');
};

// Format date
const formatDate = (dateString) => {
    const options = { year: 'numeric', month: 'short', day: 'numeric' };
    return new Date(dateString).toLocaleDateString('en-US', options);
};

// Show/hide sections
const showSection = (sectionId) => {
    document.getElementById('landingPage').style.display = 'none';
    document.getElementById('customerDashboard').style.display = 'none';
    document.getElementById('adminDashboard').style.display = 'none';
    
    document.getElementById(sectionId).style.display = 'block';
};

// Show modal
const showModal = (modalId) => {
    document.getElementById(modalId).style.display = 'flex';
};

// Hide modal
const hideModal = (modalId) => {
    document.getElementById(modalId).style.display = 'none';
};

// Function to refresh customer dashboard
const refreshCustomerDashboard = async () => {
    const currentCustomerAccount = sessionStorage.getItem('currentCustomer');
    if (currentCustomerAccount) {
        const bankData = await getBankData();
        const customer = bankData.customers.find(c => c.accountNumber === currentCustomerAccount);
        if (customer) {
            loadCustomerDashboard(customer);
        }
    }
};

// Load customer dashboard
const loadCustomerDashboard = (customer) => {
    // Calculate lifetime spending
    const lifetimeSpent = calculateLifetimeSpent(customer.transactions);
    const tier = determineTier(lifetimeSpent);
    const tierInfo = getTierInfo(tier);
    const pendingCharges = calculatePendingCharges(customer);
    
    // Update customer info
    document.getElementById('customerName').textContent = customer.name;
    document.getElementById('displayAccountNumber').textContent = customer.accountNumber;
    document.getElementById('accountNumberDisplay').textContent = customer.accountNumber;
    document.getElementById('currentBalance').textContent = formatCurrency(customer.balance);
    document.getElementById('lifetimeSpending').textContent = `Ꝟ${formatCurrency(lifetimeSpent)}`;
    
    // Update tier badge
    const tierBadge = document.getElementById('tierBadge');
    tierBadge.innerHTML = tierInfo.badge;
    
    // Update elite status
    const eliteStatus = document.getElementById('eliteStatus');
    const eliteProgress = document.getElementById('eliteProgress');
    const spendingToGo = document.getElementById('spendingToGo');
    
    eliteStatus.textContent = tierInfo.name;
    eliteStatus.style.color = tierInfo.color;
    
    const progressValue = Math.min(lifetimeSpent, 1000);
    eliteProgress.value = progressValue;
    
    if (tier === 'elite') {
        eliteProgress.style.backgroundColor = '#28a745';
        spendingToGo.textContent = '0';
        spendingToGo.parentElement.innerHTML = '<span style="color: var(--elite-purple); font-weight: bold;">✓ Eligible for Lionheart Elite!</span>';
    } else {
        const remaining = 1000 - lifetimeSpent;
        spendingToGo.textContent = formatCurrency(Math.max(0, remaining));
    }
    
    // Update account status
    const statusText = document.getElementById('accountStatusText');
    const statusDisplay = document.getElementById('accountStatusDisplay');
    
    statusText.textContent = customer.status.charAt(0).toUpperCase() + customer.status.slice(1);
    statusDisplay.textContent = customer.status.charAt(0).toUpperCase() + customer.status.slice(1);
    statusDisplay.className = `account-status status-${customer.status}`;
    
    // Load transactions
    const transactionHistory = document.getElementById('transactionHistory');
    transactionHistory.innerHTML = '';
    
    if (customer.transactions && customer.transactions.length > 0) {
        customer.transactions.slice(0, 5).forEach(transaction => {
            const transactionItem = document.createElement('div');
            transactionItem.className = 'transaction-item';
            
            const isCredit = transaction.type === 'credit';
            const amountClass = isCredit ? 'transaction-credit' : 'transaction-debit';
            const amountSign = isCredit ? '+' : '';
            
            transactionItem.innerHTML = `
                <div>
                    <strong>${transaction.description}</strong>
                    <div style="font-size: 0.9rem; color: #666;">${formatDate(transaction.date)}</div>
                </div>
                <div class="transaction-type ${amountClass}">
                    ${amountSign}Ꝟ${formatCurrency(transaction.amount)}
                </div>
            `;
            
            transactionHistory.appendChild(transactionItem);
        });
    } else {
        transactionHistory.innerHTML = '<p>No transactions found.</p>';
    }
    
    // Load credit cards
    const creditCardsContainer = document.getElementById('creditCardsContainer');
    creditCardsContainer.innerHTML = '';
    
    if (customer.creditCards && customer.creditCards.length > 0) {
        customer.creditCards.forEach(card => {
            const cardElement = document.createElement('div');
            cardElement.className = `credit-card ${card.type}`;
            
            // Determine status text and class
            let statusText, statusClass;
            switch(card.status) {
                case 'pending':
                    statusText = 'Pending Approval';
                    statusClass = 'status-pending';
                    break;
                case 'active':
                    statusText = 'Active';
                    statusClass = 'status-active';
                    break;
                case 'suspended':
                    statusText = 'Suspended';
                    statusClass = 'status-suspended';
                    break;
                case 'limited':
                    statusText = 'Limit Reached';
                    statusClass = 'status-limited';
                    break;
                default:
                    statusText = 'Active';
                    statusClass = 'status-active';
            }
            
            // Format card type for display
            const cardTypeDisplay = card.type.charAt(0).toUpperCase() + card.type.slice(1);
            
            cardElement.innerHTML = `
                <div class="card-status ${statusClass}">${statusText}</div>
                <div class="card-chip"></div>
                <div class="card-number">${card.cardNumber}</div>
                <div class="card-details">
                    <div>
                        <div style="font-size: 0.9rem;">${cardTypeDisplay}</div>
                        <div style="font-size: 0.8rem;">Exp: ${card.expiry}</div>
                    </div>
                    <div>
                        <div style="font-size: 0.9rem;">Limit: Ꝟ${formatCurrency(card.limit)}</div>
                        <div style="font-size: 0.8rem;">Used: Ꝟ${formatCurrency(card.used)}</div>
                        ${card.pendingPayments > 0 ? `<div style="font-size: 0.8rem; color: var(--warning-yellow);">Pending: Ꝟ${formatCurrency(card.pendingPayments)}</div>` : ''}
                    </div>
                </div>
            `;
            
            creditCardsContainer.appendChild(cardElement);
        });
    } else {
        creditCardsContainer.innerHTML = '<p>No credit cards found. Apply for one today!</p>';
    }
    
    // Show pending charges notification in the main alert container
    const alertContainer = document.getElementById('alertContainer');
    
    // Clear existing alerts first
    alertContainer.innerHTML = '';
    
    // Add pending charges alert if there are any
    if (pendingCharges > 0) {
        const chargesAlert = document.createElement('div');
        chargesAlert.className = 'alert alert-warning';
        chargesAlert.innerHTML = `
            <i class="fas fa-exclamation-triangle"></i>
            <span>You have Ꝟ${formatCurrency(pendingCharges)} in pending charges. <a href="#" id="viewChargesLink">View Charges</a></span>
        `;
        alertContainer.appendChild(chargesAlert);
        
        // Add event listener for the view charges link
        setTimeout(() => {
            const viewChargesLink = document.getElementById('viewChargesLink');
            if (viewChargesLink) {
                viewChargesLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    showModal('viewChargesModal');
                    loadCustomerCharges(customer);
                });
            }
        }, 100);
    }
    
    // Show elite invitation if eligible
    const eliteInvitationContainer = document.getElementById('eliteInvitationContainer');
    eliteInvitationContainer.innerHTML = '';
    
    if (lifetimeSpent >= 1000 && tier === 'elite') {
        const invitation = document.createElement('div');
        invitation.className = 'elite-invitation';
        invitation.innerHTML = `
            <h3 class="invitation-title">
                <i class="fas fa-gem"></i> Lionheart Elite Invitation
            </h3>
            <p>Congratulations! You've spent over 1000 ꝞROARS and are now eligible for our exclusive Lionheart Elite program.</p>
            <div style="margin: 20px 0;">
                <h4>Your Exclusive Benefits:</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 15px 0;">
                    <div style="background: white; padding: 15px; border-radius: 8px; border: 1px solid var(--elite-purple);">
                        <i class="fas fa-utensils" style="color: var(--elite-purple);"></i>
                        <div>Popular Lunch Table Access</div>
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 8px; border: 1px solid var(--elite-purple);">
                        <i class="fas fa-running" style="color: var(--elite-purple);"></i>
                        <div>Event Line Priority</div>
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 8px; border: 1px solid var(--elite-purple);">
                        <i class="fas fa-user-friends" style="color: var(--elite-purple);"></i>
                        <div>Social Recognition</div>
                    </div>
                </div>
            </div>
            <button class="btn btn-elite" id="acceptEliteBtn">
                <i class="fas fa-check-circle"></i> Accept Elite Status
            </button>
        `;
        eliteInvitationContainer.appendChild(invitation);
        
        document.getElementById('acceptEliteBtn')?.addEventListener('click', () => {
            showAlert('Welcome to Lionheart Elite! Your elite status has been activated. Enjoy your exclusive benefits!', 'elite');
        });
    } else if (lifetimeSpent >= 500) {
        const invitation = document.createElement('div');
        invitation.className = 'elite-invitation';
        invitation.innerHTML = `
            <h3 class="invitation-title" style="color: var(--premier-red);">
                <i class="fas fa-crown"></i> Premier Tier Unlocked!
            </h3>
            <p>You've spent over 500 ꝞROARS! You're now in our Premier tier with enhanced benefits.</p>
            <p>Keep spending to reach 1000 ꝞROARS for Lionheart Elite invitation!</p>
        `;
        eliteInvitationContainer.appendChild(invitation);
    }
    
    // Show customer dashboard
    showSection('customerDashboard');
};

// Load customer charges for payment
const loadCustomerCharges = (customer) => {
    const chargesList = document.getElementById('chargesList');
    const totalCharges = document.getElementById('totalCharges');
    
    if (!chargesList) return;
    
    chargesList.innerHTML = '';
    let total = 0;
    
    if (customer.pendingCharges && customer.pendingCharges.length > 0) {
        customer.pendingCharges.forEach(charge => {
            total += charge.amount;
            
            const chargeItem = document.createElement('div');
            chargeItem.className = 'charge-item';
            chargeItem.innerHTML = `
                <div>
                    <strong>${charge.description}</strong>
                    <div style="font-size: 0.9rem; color: #666;">
                        Issued: ${formatDate(charge.date)} | Due: ${formatDate(charge.dueDate)}
                    </div>
                </div>
                <div style="font-weight: bold; color: var(--danger-red);">
                    Ꝟ${formatCurrency(charge.amount)}
                </div>
            `;
            chargesList.appendChild(chargeItem);
        });
    } else {
        chargesList.innerHTML = '<p>No pending charges.</p>';
    }
    
    totalCharges.textContent = formatCurrency(total);
};

// Load admin dashboard
const loadAdminDashboard = async () => {
    const bankData = await getBankData();
    const customersTable = document.getElementById('customersTable');
    customersTable.innerHTML = '';
    
    // Populate customers table
    bankData.customers.forEach(customer => {
        const lifetimeSpent = calculateLifetimeSpent(customer.transactions);
        const tier = determineTier(lifetimeSpent);
        const pendingCharges = calculatePendingCharges(customer);
        
        // Determine status badge
        let statusBadge;
        switch(customer.status) {
            case 'active':
                statusBadge = '<span class="status-active" style="padding: 3px 8px; border-radius: 12px; font-size: 0.8rem;">Active</span>';
                break;
            case 'pending':
                statusBadge = '<span class="status-pending" style="padding: 3px 8px; border-radius: 12px; font-size: 0.8rem;">Pending</span>';
                break;
            case 'frozen':
                statusBadge = '<span class="status-frozen" style="padding: 3px 8px; border-radius: 12px; font-size: 0.8rem;">Frozen</span>';
                break;
            default:
                statusBadge = '<span class="status-active" style="padding: 3px 8px; border-radius: 12px; font-size: 0.8rem;">Active</span>';
        }
        
        // Tier badge
        let tierBadge = '';
        if (tier === 'elite') {
            tierBadge = '<span style="color: var(--elite-purple); font-weight: bold;">Elite</span>';
        } else if (tier === 'premier') {
            tierBadge = '<span style="color: var(--premier-red); font-weight: bold;">Premier</span>';
        } else {
            tierBadge = 'Standard';
        }
        
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${customer.accountNumber}</td>
            <td>${customer.name}</td>
            <td>Ꝟ${formatCurrency(customer.balance)}</td>
            <td>Ꝟ${formatCurrency(lifetimeSpent)}</td>
            <td>${tierBadge}</td>
            <td>${statusBadge}</td>
            <td>
                <button class="btn btn-success" style="padding: 5px 10px; font-size: 0.8rem; margin-bottom: 5px;" onclick="addMoneyToCustomer('${customer.accountNumber}')">
                    <i class="fas fa-money-bill-wave"></i> Add Money
                </button>
                <button class="btn btn-secondary" style="padding: 5px 10px; font-size: 0.8rem; margin-bottom: 5px;" onclick="editCustomer('${customer.accountNumber}')">
                    <i class="fas fa-edit"></i>
                </button>
                <button class="btn btn-warning" style="padding: 5px 10px; font-size: 0.8rem; margin-bottom: 5px;" onclick="addChargeToCustomer('${customer.accountNumber}')">
                    <i class="fas fa-plus-circle"></i> Charge
                </button>
                <button class="btn btn-danger" style="padding: 5px 10px; font-size: 0.8rem;" onclick="deleteCustomer('${customer.accountNumber}')">
                    <i class="fas fa-trash"></i>
                </button>
            </td>
        `;
        
        customersTable.appendChild(row);
    });
    
    showSection('adminDashboard');
};
// Replace your existing loadCardApplications function with this:
const loadCardApplications = async () => {
    const bankData = await getBankData();
    const table = document.getElementById('cardApplicationsTable');
    table.innerHTML = '';
    
    let hasApplications = false;
    
    // For demo, we'll show applications from customers
    bankData.customers.forEach(customer => {
        if (customer.cardApplications && customer.cardApplications.length > 0) {
            customer.cardApplications.forEach(app => {
                if (app.status === 'pending') {
                    hasApplications = true;
                    const statusBadge = app.status === 'pending' 
                        ? '<span class="status-pending">Pending</span>' 
                        : '<span class="status-active">Approved</span>';
                    
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${customer.accountNumber}</td>
                        <td>${customer.name}</td>
                        <td>${app.cardType.charAt(0).toUpperCase() + app.cardType.slice(1)}</td>
                        <td>Ꝟ${formatCurrency(app.annualIncome)}</td>
                        <td>${statusBadge}</td>
                        <td>
                            <button class="btn btn-success" style="padding: 5px 10px; font-size: 0.8rem;" onclick="approveCardApplication('${customer.accountNumber}', '${app.id}')">
                                <i class="fas fa-check"></i> Approve
                            </button>
                            <button class="btn btn-danger" style="padding: 5px 10px; font-size: 0.8rem;" onclick="denyCardApplication('${customer.accountNumber}', '${app.id}')">
                                <i class="fas fa-times"></i> Deny
                            </button>
                        </td>
                    `;
                    table.appendChild(row);
                }
            });
        }
    });
    
    if (!hasApplications) {
        table.innerHTML = '<tr><td colspan="6" style="text-align: center;">No pending card applications</td></tr>';
    }
};

// Event Listeners
document.addEventListener('DOMContentLoaded', async () => {
    // Initialize demo data
    await initializeDemoData();
    
    // Check if user is already logged in
    const currentUser = sessionStorage.getItem('currentCustomer');
    const currentAdmin = sessionStorage.getItem('currentAdmin');
    
    if (currentUser) {
        const bankData = await getBankData();
        const customer = bankData.customers.find(c => c.accountNumber === currentUser);
        if (customer) {
            loadCustomerDashboard(customer);
        }
    } else if (currentAdmin) {
        await loadAdminDashboard();
    } else {
        showSection('landingPage');
    }
    
    // Admin login button
    document.getElementById('adminLoginBtn').addEventListener('click', () => {
        showModal('adminLoginModal');
    });
    
    // Customer login button
    document.getElementById('customerLoginBtn').addEventListener('click', () => {
        showModal('customerLoginModal');
    });
    
    // Close modal buttons
    document.getElementById('closeAdminModal').addEventListener('click', () => {
        hideModal('adminLoginModal');
    });
    
    document.getElementById('closeCustomerModal').addEventListener('click', () => {
        hideModal('customerLoginModal');
    });
    
    document.getElementById('closePinModal').addEventListener('click', () => {
        hideModal('changePinModal');
    });
    
    document.getElementById('closeCardModal').addEventListener('click', () => {
        hideModal('applyCardModal');
    });
    
    document.getElementById('closeLoanModal').addEventListener('click', () => {
        hideModal('loanModal');
    });
    
    document.getElementById('closeChargesModal').addEventListener('click', () => {
        hideModal('viewChargesModal');
    });
    
    document.getElementById('closeAddChargeModal').addEventListener('click', () => {
        hideModal('addChargeModal');
    });
    
    document.getElementById('closePaymentModal').addEventListener('click', () => {
        hideModal('paymentModal');
    });
    
    document.getElementById('closeAddMoneyModal')?.addEventListener('click', () => {
        hideModal('addMoneyModal');
    });
    
    // Admin login form
    document.getElementById('adminLoginForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const username = document.getElementById('adminUsername').value;
        const password = document.getElementById('adminPassword').value;
        const bankData = await getBankData();
        
        if (username === bankData.admin.username && password === bankData.admin.password) {
            sessionStorage.setItem('currentAdmin', 'admin');
            hideModal('adminLoginModal');
            showAlert('Admin login successful!', 'success');
            await loadAdminDashboard();
        } else {
            showAlert('Invalid admin credentials!', 'error');
        }
    });
    
    // Customer login form
    document.getElementById('customerLoginForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const accountNumber = document.getElementById('accountNumber').value;
        const pin = document.getElementById('pin').value;
        const bankData = await getBankData();
        
        const customer = bankData.customers.find(c => c.accountNumber === accountNumber && c.pin === pin);
        
        if (customer) {
            sessionStorage.setItem('currentCustomer', customer.accountNumber);
            hideModal('customerLoginModal');
            showAlert('Login successful! Welcome back, ' + customer.name, 'success');
            loadCustomerDashboard(customer);
        } else {
            showAlert('Invalid account number or PIN!', 'error');
        }
    });
    
    // Logout buttons
    document.getElementById('logoutBtn').addEventListener('click', () => {
        sessionStorage.removeItem('currentCustomer');
        showSection('landingPage');
        showAlert('You have been logged out successfully.', 'info');
    });
    
    document.getElementById('adminLogoutBtn').addEventListener('click', () => {
        sessionStorage.removeItem('currentAdmin');
        showSection('landingPage');
        showAlert('Admin session ended.', 'info');
    });
    
    // Change PIN button
    document.getElementById('changePinBtn').addEventListener('click', () => {
        showModal('changePinModal');
    });
    
    // Change PIN form
    document.getElementById('changePinForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const currentPIN = document.getElementById('currentPIN').value;
        const newPIN = document.getElementById('newPIN').value;
        const confirmPIN = document.getElementById('confirmPIN').value;
        
        if (newPIN !== confirmPIN) {
            showAlert('New PIN and confirmation do not match!', 'error');
            return;
        }
        
        if (newPIN.length !== 4 || !/^\d+$/.test(newPIN)) {
            showAlert('PIN must be 4 digits!', 'error');
            return;
        }
        
        const bankData = await getBankData();
        const currentCustomerAccount = sessionStorage.getItem('currentCustomer');
        const customerIndex = bankData.customers.findIndex(c => c.accountNumber === currentCustomerAccount);
        
        if (customerIndex !== -1) {
            if (bankData.customers[customerIndex].pin !== currentPIN) {
                showAlert('Current PIN is incorrect!', 'error');
                return;
            }
            
            bankData.customers[customerIndex].pin = newPIN;
            const success = await saveBankData(bankData);
            
            if (success) {
                hideModal('changePinModal');
                showAlert('PIN changed successfully!', 'success');
                
                // Clear form
                document.getElementById('changePinForm').reset();
            } else {
                showAlert('Failed to save PIN change!', 'error');
            }
        }
    });
    
    // Apply for credit card button
    document.getElementById('applyCardBtn').addEventListener('click', () => {
        showModal('applyCardModal');
    });
    
    // Apply for credit card form
    document.getElementById('applyCardForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const cardType = document.getElementById('cardType').value;
        const annualIncome = document.getElementById('annualIncome').value;
        const employmentStatus = document.getElementById('employmentStatus').value;
        const cardReason = document.getElementById('cardReason').value;
        
        const bankData = await getBankData();
        const currentCustomerAccount = sessionStorage.getItem('currentCustomer');
        const customer = bankData.customers.find(c => c.accountNumber === currentCustomerAccount);
        
        if (!customer) {
            showAlert('Customer not found!', 'error');
            return;
        }
        
        // Create card application
        const cardApplication = {
            id: Date.now(),
            accountNumber: currentCustomerAccount,
            customerName: customer.name,
            cardType: cardType,
            annualIncome: parseFloat(annualIncome),
            employmentStatus: employmentStatus,
            reason: cardReason,
            date: new Date().toISOString().split('T')[0],
            status: 'pending'
        };
        
        // Add to customer's applications
        if (!customer.cardApplications) {
            customer.cardApplications = [];
        }
        customer.cardApplications.push(cardApplication);
        
        // Update bank data
        bankData.customers = bankData.customers.map(c => 
            c.accountNumber === customer.accountNumber ? customer : c
        );
        
        // Add to global applications list
        if (!bankData.cardApplications) {
            bankData.cardApplications = [];
        }
        bankData.cardApplications.push(cardApplication);
        
        const success = await saveBankData(bankData);
        
        if (success) {
            hideModal('applyCardModal');
            showAlert('Credit card application submitted! Admin will review it shortly.', 'success');
            
            // Clear form
            document.getElementById('applyCardForm').reset();
        } else {
            showAlert('Failed to submit application!', 'error');
        }
    });
    
    // Apply for loan button
    document.getElementById('applyLoanBtn').addEventListener('click', () => {
        showModal('loanModal');
    });
    
    // Loan application form
    document.getElementById('loanForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const loanAmount = parseFloat(document.getElementById('loanAmount').value);
        const loanPurpose = document.getElementById('loanPurpose').value;
        const repaymentPeriod = document.getElementById('repaymentPeriod').value;
        const loanComments = document.getElementById('loanComments').value;
        
        const bankData = await getBankData();
        const currentCustomerAccount = sessionStorage.getItem('currentCustomer');
        const customer = bankData.customers.find(c => c.accountNumber === currentCustomerAccount);
        
        if (!customer) {
            showAlert('Customer not found!', 'error');
            return;
        }
        
        // Create loan application data
        const loanApplication = {
            id: Date.now(),
            accountNumber: currentCustomerAccount,
            customerName: customer.name,
            loanAmount: loanAmount,
            loanPurpose: loanPurpose,
            repaymentPeriod: repaymentPeriod,
            comments: loanComments || 'None',
            date: new Date().toISOString().split('T')[0],
            status: 'pending'
        };
        
        // Add to loan applications
        if (!bankData.loanApplications) {
            bankData.loanApplications = [];
        }
        bankData.loanApplications.push(loanApplication);
        
        const success = await saveBankData(bankData);
        
        if (success) {
            hideModal('loanModal');
            showAlert('Loan application submitted! Admin will review it shortly.', 'success');
            
            // Clear form
            document.getElementById('loanForm').reset();
        } else {
            showAlert('Failed to submit loan application!', 'error');
        }
    });
    
    // Currency converter
    document.getElementById('convertBtn').addEventListener('click', async () => {
        const amount = parseFloat(document.getElementById('convertAmount').value);
        const currency = document.getElementById('convertCurrency').value;
        const bankData = await getBankData();
        const exchangeRate = bankData.exchangeRate || 0.15;
        
        if (!amount || amount <= 0) {
            showAlert('Please enter a valid amount!', 'error');
            return;
        }
        
        // Mock exchange rates based on ROARS = $0.15 USD
        const usdAmount = amount * exchangeRate;
        const rates = {
            'USD': 1,
            'EUR': 0.85,
            'GBP': 0.73,
            'JPY': 110
        };
        
        const convertedAmount = usdAmount * rates[currency];
        const currencySymbols = {
            'USD': '$',
            'EUR': '€',
            'GBP': '£',
            'JPY': '¥'
        };
        
        const result = document.getElementById('conversionResult');
        result.innerHTML = `
            <strong>Ꝟ${formatCurrency(amount)} ROARS = ${currencySymbols[currency]}${formatCurrency(convertedAmount)} ${currency}</strong>
            <div style="font-size: 0.9rem; color: #666; margin-top: 5px;">
                Based on exchange rate: 1 ꝞROARS = $${exchangeRate} USD
            </div>
        `;
    });
    
    // Admin: Create account button
    document.getElementById('createAccountBtn').addEventListener('click', () => {
        const form = document.getElementById('createAccountForm');
        form.style.display = form.style.display === 'none' ? 'block' : 'none';
    });
    
    // Admin: Manage credit cards button
    document.getElementById('manageCardsBtn').addEventListener('click', async () => {
        const form = document.getElementById('creditCardApplications');
        form.style.display = form.style.display === 'none' ? 'block' : 'none';
        await loadCardApplications();
    });
    
    // Admin: Manage elite invitations button
    document.getElementById('manageEliteBtn').addEventListener('click', async () => {
        const bankData = await getBankData();
        const eliteEligible = bankData.customers.filter(customer => {
            const lifetimeSpent = calculateLifetimeSpent(customer.transactions);
            return lifetimeSpent >= 1000 && determineTier(lifetimeSpent) !== 'elite';
        });
        
        if (eliteEligible.length > 0) {
            let message = 'Customers eligible for Lionheart Elite invitation:\n\n';
            eliteEligible.forEach(customer => {
                const lifetimeSpent = calculateLifetimeSpent(customer.transactions);
                message += `• ${customer.name} (${customer.accountNumber}) - Ꝟ${formatCurrency(lifetimeSpent)} spent\n`;
            });
            message += '\nSend them elite invitation emails!';
            showAlert(message, 'elite', 'adminAlertContainer');
        } else {
            showAlert('No customers are currently eligible for Lionheart Elite invitation.', 'info', 'adminAlertContainer');
        }
    });
    
    // Admin: Create new account form
    document.getElementById('newAccountForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const name = document.getElementById('newCustomerName').value;
        const email = document.getElementById('newCustomerEmail').value;
        const balance = parseFloat(document.getElementById('initialBalance').value);
        const pin = document.getElementById('newCustomerPIN').value;
        
        if (pin.length !== 4 || !/^\d+$/.test(pin)) {
            showAlert('PIN must be 4 digits!', 'error', 'adminAlertContainer');
            return;
        }
        
        if (balance > 1000) {
            showAlert('Initial balance too high! ROARS are rare - typical initial balance is 100-500 Ꝟ', 'warning', 'adminAlertContainer');
            return;
        }
        
        const bankData = await getBankData();
        const accountNumber = generateAccountNumber();
        
        // Create new customer
        const newCustomer = {
            accountNumber: accountNumber,
            name: name,
            email: email,
            pin: pin,
            balance: balance,
            lifetimeSpent: 0,
            pendingCharges: [],
            paidCharges: [],
            status: 'active',
            tier: 'standard',
            transactions: [
                {
                    id: 1,
                    date: new Date().toISOString().split('T')[0],
                    description: 'Initial Deposit',
                    amount: balance,
                    type: 'credit'
                }
            ],
            creditCards: [],
            cardApplications: []
        };
        
        bankData.customers.push(newCustomer);
        const success = await saveBankData(bankData);
        
        if (success) {
            showAlert(`New account created successfully! Account Number: ${accountNumber}`, 'success', 'adminAlertContainer');
            
            // Clear form
            document.getElementById('newAccountForm').reset();
            
            // Reload admin dashboard
            await loadAdminDashboard();
        } else {
            showAlert('Failed to create account!', 'error', 'adminAlertContainer');
        }
    });
    
    // Pay charges button
    document.getElementById('payChargesBtn')?.addEventListener('click', async () => {
        const bankData = await getBankData();
        const currentCustomerAccount = sessionStorage.getItem('currentCustomer');
        const customer = bankData.customers.find(c => c.accountNumber === currentCustomerAccount);
        
        if (!customer) {
            showAlert('Customer not found!', 'error');
            return;
        }
        
        const pendingCharges = calculatePendingCharges(customer);
        
        if (pendingCharges <= 0) {
            showAlert('No pending charges to pay.', 'info');
            return;
        }
        
        if (customer.balance < pendingCharges) {
            showAlert(`Insufficient balance! You need Ꝟ${formatCurrency(pendingCharges - customer.balance)} more.`, 'error');
            return;
        }
        
        // Process payment
        customer.balance -= pendingCharges;
        
        // Move pending charges to paid charges
        if (!customer.paidCharges) {
            customer.paidCharges = [];
        }
        
        customer.paidCharges.push(...customer.pendingCharges.map(charge => ({
            ...charge,
            paidDate: new Date().toISOString().split('T')[0],
            status: 'paid'
        })));
        
        // Add transaction
        customer.transactions.push({
            id: Date.now(),
            date: new Date().toISOString().split('T')[0],
            description: 'Payment for pending charges',
            amount: -pendingCharges,
            type: 'debit'
        });
        
        // Clear pending charges
        customer.pendingCharges = [];
        
        // Update credit card pending payments
        if (customer.creditCards && customer.creditCards.length > 0) {
            customer.creditCards.forEach(card => {
                if (card.pendingPayments) {
                    card.pendingPayments = 0;
                }
            });
        }
        
        // Update bank data
        bankData.customers = bankData.customers.map(c => 
            c.accountNumber === customer.accountNumber ? customer : c
        );
        
        const success = await saveBankData(bankData);
        
        if (success) {
            hideModal('viewChargesModal');
            showAlert(`Payment successful! Ꝟ${formatCurrency(pendingCharges)} paid.`, 'success');
            
            // Reload dashboard
            loadCustomerDashboard(customer);
        } else {
            showAlert('Payment failed! Please try again.', 'error');
        }
    });
    
    // Quick action: View transactions
    document.getElementById('viewTransactionsBtn').addEventListener('click', () => {
        showAlert('Transaction history loaded. Use filters to view specific transactions.', 'info');
    });
    
    // Quick action: Transfer
    document.getElementById('transferBtn').addEventListener('click', () => {
        showAlert('Transfer feature is under development. Coming soon!', 'info');
    });
    
    // Open account button on landing page
    document.getElementById('openAccountBtn').addEventListener('click', () => {
        showAlert('To open an account, please visit your nearest branch or contact customer support.', 'info');
    });
    
    // Learn more button on landing page
    document.getElementById('learnMoreBtn').addEventListener('click', () => {
        showAlert('ROARS Bank offers premium banking services with the ROARS currency (Ꝟ). Contact us for more information.', 'info');
    });
    
    // Close modals when clicking outside
    window.addEventListener('click', (event) => {
        const modals = ['adminLoginModal', 'customerLoginModal', 'changePinModal', 
                       'applyCardModal', 'loanModal', 'viewChargesModal', 
                       'addChargeModal', 'paymentModal', 'addMoneyModal'];
        
        modals.forEach(modalId => {
            const modal = document.getElementById(modalId);
            if (event.target === modal) {
                hideModal(modalId);
            }
        });
    });
});

window.deleteCustomer = async (accountNumber) => {
    if (confirm(`Are you sure you want to delete account ${accountNumber}? This action cannot be undone.`)) {
        const bankData = await getBankData();
        
        // Check if we're trying to delete the currently logged-in admin
        if (accountNumber === 'admin' || accountNumber === sessionStorage.getItem('currentAdmin')) {
            showAlert('Cannot delete admin account!', 'error', 'adminAlertContainer');
            return;
        }
        
        // Filter out the customer to delete
        const initialLength = bankData.customers.length;
        bankData.customers = bankData.customers.filter(c => c.accountNumber !== accountNumber);
        
        if (bankData.customers.length < initialLength) {
            const success = await saveBankData(bankData);
            
            if (success) {
                showAlert(`Account ${accountNumber} has been deleted successfully.`, 'success', 'adminAlertContainer');
                
                // Also clear session if this user is currently logged in
                if (sessionStorage.getItem('currentCustomer') === accountNumber) {
                    sessionStorage.removeItem('currentCustomer');
                }
                
                // Reload admin dashboard
                await loadAdminDashboard();
            } else {
                showAlert('Failed to save changes after deletion!', 'error', 'adminAlertContainer');
            }
        } else {
            showAlert(`Account ${accountNumber} not found!`, 'error', 'adminAlertContainer');
        }
    }
};

window.addChargeToCustomer = async (accountNumber) => {
    const bankData = await getBankData();
    const customer = bankData.customers.find(c => c.accountNumber === accountNumber);
    
    if (!customer) {
        showAlert('Customer not found!', 'error', 'adminAlertContainer');
        return;
    }
    
    // Store customer account number for the form
    document.getElementById('addChargeModal').setAttribute('data-account', accountNumber);
    document.getElementById('chargeCustomerName').textContent = customer.name;
    document.getElementById('chargeAccountNumber').textContent = accountNumber;
    
    showModal('addChargeModal');
};

window.approveCardApplication = (accountNumber, appId) => {
    showAlert(`Card application ${appId} for account ${accountNumber} approved!`, 'success', 'adminAlertContainer');
};

window.denyCardApplication = (accountNumber, appId) => {
    showAlert(`Card application ${appId} for account ${accountNumber} denied.`, 'error', 'adminAlertContainer');
};

// Add Money function
window.addMoneyToCustomer = async (accountNumber) => {
    const bankData = await getBankData();
    const customer = bankData.customers.find(c => c.accountNumber === accountNumber);
    
    if (!customer) {
        showAlert('Customer not found!', 'error', 'adminAlertContainer');
        return;
    }
    
    // Store customer info for the form
    document.getElementById('addMoneyModal').setAttribute('data-account', accountNumber);
    document.getElementById('addMoneyCustomerName').textContent = customer.name;
    document.getElementById('addMoneyAccountNumber').textContent = accountNumber;
    document.getElementById('addMoneyCurrentBalance').textContent = `Ꝟ${formatCurrency(customer.balance)}`;
    
    showModal('addMoneyModal');
};

// Add charge form submission
document.addEventListener('DOMContentLoaded', () => {
    const addChargeForm = document.getElementById('addChargeForm');
    if (addChargeForm) {
        addChargeForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const accountNumber = document.getElementById('addChargeModal').getAttribute('data-account');
            const chargeDescription = document.getElementById('chargeDescription').value;
            const chargeAmount = parseFloat(document.getElementById('chargeAmount').value);
            const chargeDueDate = document.getElementById('chargeDueDate').value;
            
            if (!chargeDescription || !chargeAmount || !chargeDueDate) {
                showAlert('Please fill in all fields!', 'error', 'adminAlertContainer');
                return;
            }
            
            if (chargeAmount <= 0) {
                showAlert('Charge amount must be greater than 0!', 'error', 'adminAlertContainer');
                return;
            }
            
            const bankData = await getBankData();
            const customer = bankData.customers.find(c => c.accountNumber === accountNumber);
            
            if (!customer) {
                showAlert('Customer not found!', 'error', 'adminAlertContainer');
                return;
            }
            
            // Add charge to customer
            if (!customer.pendingCharges) {
                customer.pendingCharges = [];
            }
            
            customer.pendingCharges.push({
                id: Date.now(),
                date: new Date().toISOString().split('T')[0],
                description: chargeDescription,
                amount: chargeAmount,
                dueDate: chargeDueDate,
                status: 'pending'
            });
            
            // Update credit card pending payments
            if (customer.creditCards && customer.creditCards.length > 0) {
                customer.creditCards.forEach(card => {
                    if (!card.pendingPayments) {
                        card.pendingPayments = 0;
                    }
                    card.pendingPayments += chargeAmount;
                });
            }
            
            // Update bank data
            bankData.customers = bankData.customers.map(c => 
                c.accountNumber === customer.accountNumber ? customer : c
            );
            
            const success = await saveBankData(bankData);
            
            if (success) {
                // Check if the customer is currently logged in and refresh their dashboard
                if (sessionStorage.getItem('currentCustomer') === accountNumber) {
                    await refreshCustomerDashboard();
                }
                
                hideModal('addChargeModal');
                showAlert(`Charge of Ꝟ${formatCurrency(chargeAmount)} added to ${customer.name}'s account.`, 'success', 'adminAlertContainer');
                
                // Clear form
                document.getElementById('addChargeForm').reset();
                
                // Reload admin dashboard
                await loadAdminDashboard();
            } else {
                showAlert('Failed to save charge!', 'error', 'adminAlertContainer');
            }
        });
    }
    
    // Add Money form submission
    const addMoneyForm = document.getElementById('addMoneyForm');
    if (addMoneyForm) {
        addMoneyForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const accountNumber = document.getElementById('addMoneyModal').getAttribute('data-account');
            const amount = parseFloat(document.getElementById('addMoneyAmount').value);
            const reason = document.getElementById('addMoneyReason').value;
            
            if (!amount || amount <= 0) {
                showAlert('Please enter a valid amount!', 'error', 'adminAlertContainer');
                return;
            }
            
            const bankData = await getBankData();
            const customer = bankData.customers.find(c => c.accountNumber === accountNumber);
            
            if (!customer) {
                showAlert('Customer not found!', 'error', 'adminAlertContainer');
                return;
            }
            
            // Add money to customer balance
            customer.balance += amount;
            
            // Add transaction
            customer.transactions.unshift({
                id: Date.now(),
                date: new Date().toISOString().split('T')[0],
                description: reason,
                amount: amount,
                type: 'credit'
            });
            
            // Update bank data
            bankData.customers = bankData.customers.map(c => 
                c.accountNumber === customer.accountNumber ? customer : c
            );
            
            const success = await saveBankData(bankData);
            
            if (success) {
                // Refresh if customer is logged in
                if (sessionStorage.getItem('currentCustomer') === accountNumber) {
                    await refreshCustomerDashboard();
                }
                
                hideModal('addMoneyModal');
                showAlert(`Successfully added Ꝟ${formatCurrency(amount)} to ${customer.name}'s account. New balance: Ꝟ${formatCurrency(customer.balance)}`, 'success', 'adminAlertContainer');
                
                // Clear form
                document.getElementById('addMoneyForm').reset();
                
                // Reload admin dashboard
                await loadAdminDashboard();
            } else {
                showAlert('Failed to add money!', 'error', 'adminAlertContainer');
            }
        });
    }
});
</script>
</body>
</html>

